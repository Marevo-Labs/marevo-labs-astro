---
// Section
// ------------
// Description: a foundational component representing a section of content within page. The section component can contain any number of rows.
// Properties:
// - Id: the id of the section
// - FullWidth: whether the section is will expand to full width or not
// - StickyCol: specifies wether the section can contain a sticky column or not
// - Mode:  use that to overide the light/dark mode for a specific section. Usefull if you have a section that might contain a dark background
// - Padding: by default each section has a vertical padding. The padding property defines where the padding is applied (top, bottom, both, none), default is both
// - Bg: the background image of the section
// - BgPosition: the position of the background (center, top, bottom)
// - BgHeight: the height of the background
// - classes: additional classes

// Props
type BgProps = {
  src: string
  width: number
  height: number
  format: string
}
type Props = {
  id?: string
  fullWidth?: boolean
  stickyCol?: boolean
  mode?: "dark" | "light"
  padding?: "both" | "top" | "bottom" | "none"
  bg?: BgProps
  bgPosition?: string
  bgHeight?: string
  classes?: string
}
const {
  id,
  fullWidth,
  stickyCol = false,
  mode,
  padding = "both",
  bg,
  bgPosition = "center",
  bgHeight = "100%",
  classes,
} = Astro.props

const bgImageUrl = bg?.src

const bgStyle =
  bg && bgImageUrl
    ? {
        "--bg-image": `url("${bgImageUrl}")`,
        backgroundImage: "var(--bg-image)",
        height: bgHeight,
        backgroundPosition: bgPosition,
      }
    : {
        height: bgHeight,
      }
---

<section
  {...id ? { id } : {}}
  class:list={[
    "relative text-zinc-700 dark:text-zinc-300 [&.dark:not([class*='bg-'])]:bg-zinc-950 [&.dark]:text-zinc-400 [&.light:not([class*='bg-'])]:bg-white [&.light]:bg-white [&.light]:text-zinc-500",
    { "[&_.container]:h-full": stickyCol },
    { "overflow-hidden": !stickyCol },
    { "py-12 lg:py-24": padding === "both" },
    { "pt-12 lg:pt-24": padding === "top" },
    { "pb-12 lg:pb-24": padding === "bottom" },
    { [`${mode}`]: mode },
    { [`${classes}`]: classes },
  ]}
>
  <div class="absolute inset-0 bg-cover" style={bgStyle}></div>
  <div
    class:list={[
      "container relative z-[1] mx-auto px-6",
      { "max-w-full px-0": fullWidth },
    ]}
  >
    <slot />
  </div>
</section>
