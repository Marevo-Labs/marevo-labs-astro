---
import { cn } from "@/lib/utils"

// Column
// ------------
// Description: Represents a column in a 12 column grid.
// Properties:
// - Span: the span of the column (1 to 12)
// - SpanMobile: the span of the column on mobile (1 to 12)
// - Align: the horizontal alignment of the column (start, center, end)
// - Classes: additional classes

// Props
type Props = {
  span?: string
  spanMobile?: string
  align?: string
  classes?: string
}
const { span, spanMobile = "12", align, classes } = Astro.props

const hasContent = Astro.slots.default

// Map span values to explicit class names so Tailwind v4 can detect them
// Using explicit mappings instead of string concatenation ensures Tailwind's JIT can see the classes
const spanMobileClasses: Record<string, string> = {
  "1": "col-span-1",
  "2": "col-span-2",
  "3": "col-span-3",
  "4": "col-span-4",
  "5": "col-span-5",
  "6": "col-span-6",
  "7": "col-span-7",
  "8": "col-span-8",
  "9": "col-span-9",
  "10": "col-span-10",
  "11": "col-span-11",
  "12": "col-span-12",
}

const spanClasses: Record<string, string> = {
  "1": "lg:col-span-1",
  "2": "lg:col-span-2",
  "3": "lg:col-span-3",
  "4": "lg:col-span-4",
  "5": "lg:col-span-5",
  "6": "lg:col-span-6",
  "7": "lg:col-span-7",
  "8": "lg:col-span-8",
  "9": "lg:col-span-9",
  "10": "lg:col-span-10",
  "11": "lg:col-span-11",
  "12": "lg:col-span-12",
}

const alignClasses: Record<string, string> = {
  start: "text-start",
  center: "text-center",
  end: "text-end",
}

const className = cn(
  "col",
  spanMobile && spanMobileClasses[spanMobile],
  span && spanClasses[span],
  align && alignClasses[align],
  classes,
  hasContent && "has-[.placeholder]:hidden lg:has-[.placeholder]:block"
)
---

<div class={className}>
  {hasContent ? <slot /> : <div class="placeholder" />}
</div>
