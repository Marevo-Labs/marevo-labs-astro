---
// Testimonial
// ------------
// Description: the testimonial component is a ui element that displays a quote from a customer or client.
// Properties:
// - Blockquote: the quote
// - Figcaption: the caption
// - Cite: the cite of the testimonial
// - Avatar: the user avatar
// - Size: the size of the testimonial (base, sm)
// - MobileSize: the mobile size of the testimonial (base, sm)
// - Align: the content alignment of the testimonial (left, center)
// - Rating: the rating of the testimonial (0 to 5) - optional
// - QuoteSize: the size of the quote icon
// - classes: additional classes
// Reference: https://wind-ui.com/components/testimonials/

// Components
// - UI
import Rating from "./Rating.astro"
import Avatar from "./Avatar.astro"
import { Quote } from "lucide-react"

// Props
type Props = {
  blockquote: string
  figcaption: string
  cite?: string
  link?: string
  avatar?: any
  size?: string
  mobileSize?: string
  align?: "left" | "center"
  rating?: 0 | 1 | 2 | 3 | 4 | 5
  quoteSize?: number
  classes?: string
}
const {
  blockquote,
  figcaption,
  cite,
  avatar,
  size = "base",
  mobileSize = size,
  rating,
  align = "left",
  link,
  classes,
  quoteSize = 64,
} = Astro.props
---

<div
  class:list={[
    "overflow-hidden leading-relaxed",
    {
      "text-center [&_figcaption:has(.avatar)_div]:text-left [&_figcaption]:justify-center":
        align === "center",
    },
    { ["text-" + `${mobileSize}`]: mobileSize },
    { ["lg:text-" + `${size}`]: size },
    { [`${classes}`]: classes },
  ]}
>
  <div class="relative p-6">
    <figure class="relative z-10">
      <blockquote
        class="italic p-6 [&>p]:text-zinc-500 dark:[&>p]:text-zinc-300"
      >
        <p>
          {blockquote}
        </p>
      </blockquote>
      <figcaption
        class:list={[
          "flex flex-col items-center gap-4 p-6 pt-2 text-sm leading-normal text-zinc-700 dark:text-zinc-50",
          { "justify-center": align === "center" },
        ]}
      >
        {rating && <Rating rating={rating} />}
        <div class="flex items-center gap-4 pt-4 text-sm">
          {
            avatar && (
              <Avatar
                size="lg"
                image={avatar}
                radius="rounded-full"
                classes="cursor-default max-w-full shrink-0"
              />
            )
          }
          <div
            class:list={[
              "flex flex-col gap-1",
              { "text-left": align === "center" && avatar },
            ]}
          >
            <span class="font-gotham text-2xl font-bold uppercase"
              >{figcaption}</span
            >
            {
              cite && (
                <cite class="text-muted-foreground">
                  {link ? <a href={link}>{cite}</a> : <span>{cite}</span>}
                </cite>
              )
            }
          </div>
        </div>
      </figcaption>
    </figure>
    <div class="absolute left-6 top-6 z-0 text-primary/20">
      <Quote size={quoteSize} width={quoteSize} height={quoteSize} />
    </div>
  </div>
</div>
