---
// Text and Image Section
// ------------
// Description: A basic section with text and a side image.
// Properties:
// - id: The id of the section
// - title: The title of the section
// - image: The image of the section
// - imageW: The width of the image
// - imageH: The height of the image
// - mobileImage: if provided, this image will be used instead on mobile devices
// - imagePosition: The position of the image (left or right of the text)
// - text: The text of the section
// - classes: Additional classes to be added to the section
// - offsetImage: Determines if the image should be offset (positioned absolutely)

// Components
// - Layout
import Section from "../../ui/Section.astro"
import Row from "../../ui/Row.astro"
import Col from "../../ui/Col.astro"
import { cn } from "../../../lib/utils"

// Props
type Props = {
  id?: string
  title?: string
  image?: any
  imageWidth?: number
  imageHeight?: number
  mobileImage?: any
  imagePosition?: "left" | "right"
  text?: string
  classes?: string
  offsetImage?: boolean
}
const {
  id,
  title,
  image,
  imageWidth,
  imageHeight,
  mobileImage,
  imagePosition = "right",
  text,
  classes,
  offsetImage = false,
} = Astro.props
---

<Section id={id} classes={classes}>
  <Row>
    <Col span="6" classes="relative">
      <picture
        class={cn(
          "flex justify-center",
          offsetImage && "h-full",
          offsetImage &&
            imagePosition === "right" &&
            "lg:[&_img]:left-0 lg:[&_img]:right-auto",
          offsetImage &&
            "lg:[&_img]:absolute lg:[&_img]:right-0 lg:[&_img]:top-1/2 lg:[&_img]:max-w-none lg:[&_img]:-translate-y-1/2"
        )}
      >
        {
          mobileImage && (
            <source src={mobileImage.src} media="(max-width: 1024px)" />
          )
        }
        <img
          src={image.src}
          alt={title}
          width={imageWidth}
          height={imageHeight}
        />
      </picture>
    </Col>
    <Col
      span="6"
      classes={cn("self-center", imagePosition === "right" && "lg:-order-1")}
    >
      <div class={cn("max-w-xl space-y-6")}>
        <h2
          class={cn(
            "text-pretty text-2xl lg:text-3xl font-gotham uppercase text-foreground"
          )}
          set:html={title}
        />
        <p class={cn("text-lg leading-relaxed text-muted-foreground")}>
          {text}
        </p>
      </div>
    </Col>
  </Row>
</Section>
